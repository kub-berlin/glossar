<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Glossar</title>
	<style>
		table {
			border-collapse: collapse;
			border-spacing: 0;
		}
		td, th {
			border: 1px solid black;
			padding: 0.2em 0.5em;
			vertical-align: top;
		}
		form {
			display: flex;
			gap: 1em;
			margin-bottom: 1em;
		}
		@media print {
			form {
				display: none;
			}
		}
	</style>
</head>
<body>
	<table>
		<thead>
			<tr>
				{{{ thead }}}
			</tr>
		</thead>
		<tbody>
			{{{ tbody }}}
		</tbody>
	</table>

	<script>
		var form = document.createElement('form');
		document.body.prepend(form);

		var search = document.createElement('input');
		search.autofocus = true;
		search.addEventListener('input', event => {
			var q = search.value.toLowerCase();
			document.querySelectorAll('tbody tr').forEach(tr => {
				var th = tr.querySelector('td');
				tr.hidden = q && !th.textContent.toLowerCase().includes(q);
			});
		});
		form.append(search);

		document.querySelectorAll('th').forEach(th => {
			var label = document.createElement('label');
			var checkbox = document.createElement('input');
			checkbox.type = 'checkbox';
			checkbox.checked = true;
			checkbox.addEventListener('change', event => {
				th.hidden = !checkbox.checked;
				document.querySelectorAll(`td[lang="${th.dataset.lang}"]`).forEach(td => {
					td.hidden = !checkbox.checked;
				});
			});
			label.append(checkbox);
			label.append(' ' + th.textContent);
			form.append(label);
		});
	</script>
</body>
</html>
